import{a as H}from"./chunk-TULKV67A.js";import{a as T,b as v,c as q,d as j,e as D,h as G,i as L,o as V,q as Y}from"./chunk-7V6QZHV2.js";import{b as A}from"./chunk-SZTZXQSR.js";import{b as I,c as E,e as B}from"./chunk-CTDK6JPT.js";import{$ as b,B as R,Na as F,Q as t,R as m,T as M,Ta as N,V as x,Va as z,X as u,Z as _,_ as O,da as i,ea as r,fa as p,ha as y,ja as l,ka as g,la as w,ua as S,ya as s,za as d}from"./chunk-LKTHQ3NI.js";function K(a,o){a&1&&(i(0,"div",17),l(1),s(2,"translate"),r()),a&2&&(t(),w(" ",d(2,1,"passwordReset.new.password_error")," "))}function Q(a,o){a&1&&(i(0,"div",17),l(1),s(2,"translate"),r()),a&2&&(t(),w(" ",d(2,1,"passwordReset.new.mismatch_error")," "))}function U(a,o){a&1&&p(0,"div",23)}function W(a,o){a&1&&p(0,"i",24)}var J=class a{constructor(o,n,e,c,f,h){this.fb=o;this.passwordResetService=n;this.notification=e;this.translate=c;this.router=f;this.route=h;this.passwordForm=this.fb.group({password:["",[v.required,v.minLength(8)]],confirmPassword:["",v.required]},{validators:this.passwordMatchValidator})}passwordForm;isLoading=M(!1);showPassword=M(!1);code="";ngOnInit(){this.route.queryParams.subscribe(o=>{this.code=o.code,this.code||this.router.navigate(["/admin/password-reset/request"])})}passwordMatchValidator(o){let n=o.get("password"),e=o.get("confirmPassword");return n&&e&&n.value!==e.value?{mismatch:!0}:null}togglePasswordVisibility(){this.showPassword.update(o=>!o)}onSubmit(){if(this.passwordForm.invalid||!this.code)return;this.isLoading.set(!0);let o=this.passwordForm.value.password;this.passwordResetService.resetPassword(this.code,o).subscribe({next:n=>{if(this.isLoading.set(!1),n.ok){let e=this.translate.instant("passwordReset.new.success");this.notification.success(e,5e3),setTimeout(()=>{this.router.navigate(["/admin/login"])},2e3)}},error:n=>{this.isLoading.set(!1),console.error("Reset password error:",n);let e="";n.error&&(typeof n.error=="string"?e=n.error:n.error.error?e=n.error.error:n.error.message&&(e=n.error.message)),e||(e=this.translate.instant("passwordReset.new.error")),this.notification.error(e,4e3)}})}static \u0275fac=function(n){return new(n||a)(m(V),m(H),m(A),m(I),m(z),m(N))};static \u0275cmp=R({type:a,selectors:[["app-password-reset-new"]],standalone:!0,features:[S],decls:49,vars:43,consts:[[1,"admin-login-container"],[1,"background-pattern"],[1,"pattern-circle","circle-1"],[1,"pattern-circle","circle-2"],[1,"content-wrapper"],[1,"login-card"],[1,"card-header"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","password",1,"form-label"],[1,"input-wrapper"],[1,"fas","fa-key"],["id","password","formControlName","password",1,"form-control",3,"type","placeholder"],["type","button",1,"toggle-password",3,"click"],[1,"invalid-feedback"],["for","confirmPassword",1,"form-label"],[1,"fas","fa-lock"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control",3,"placeholder"],[1,"password-requirements"],["type","submit",1,"btn-login",3,"disabled"],[1,"spinner"],[1,"fas","fa-save"]],template:function(n,e){if(n&1&&(i(0,"div",0)(1,"div",1),p(2,"div",2)(3,"div",3),r(),i(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),l(8),s(9,"translate"),r(),i(10,"p",8),l(11),s(12,"translate"),r()(),i(13,"div",9)(14,"form",10),y("ngSubmit",function(){return e.onSubmit()}),i(15,"div",11)(16,"label",12),l(17),s(18,"translate"),r(),i(19,"div",13),p(20,"i",14)(21,"input",15),s(22,"translate"),i(23,"button",16),y("click",function(){return e.togglePasswordVisibility()}),p(24,"i"),r()(),x(25,K,3,3,"div",17),r(),i(26,"div",11)(27,"label",18),l(28),s(29,"translate"),r(),i(30,"div",13),p(31,"i",19)(32,"input",20),s(33,"translate"),r(),x(34,Q,3,3,"div",17),r(),i(35,"div",21)(36,"p"),l(37),s(38,"translate"),r(),i(39,"ul")(40,"li"),p(41,"i"),l(42),s(43,"translate"),r()()(),i(44,"button",22),x(45,U,1,0,"div",23)(46,W,1,0,"i",24),l(47),s(48,"translate"),r()()()()()()),n&2){let c,f,h,k,P,C;t(8),g(d(9,25,"passwordReset.new.title")),t(3),g(d(12,27,"passwordReset.new.subtitle")),t(3),u("formGroup",e.passwordForm),t(3),g(d(18,29,"passwordReset.new.password_label")),t(4),_("is-invalid",((c=e.passwordForm.get("password"))==null?null:c.invalid)&&((c=e.passwordForm.get("password"))==null?null:c.touched)),u("type",e.showPassword()?"text":"password")("placeholder",d(22,31,"passwordReset.new.password_placeholder")),t(3),O(e.showPassword()?"fas fa-eye-slash":"fas fa-eye"),t(),b((f=e.passwordForm.get("password"))!=null&&f.invalid&&((f=e.passwordForm.get("password"))!=null&&f.touched)?25:-1),t(3),g(d(29,33,"passwordReset.new.confirm_label")),t(4),_("is-invalid",e.passwordForm.hasError("mismatch")&&((h=e.passwordForm.get("confirmPassword"))==null?null:h.touched)),u("placeholder",d(33,35,"passwordReset.new.confirm_placeholder")),t(2),b(e.passwordForm.hasError("mismatch")&&((k=e.passwordForm.get("confirmPassword"))!=null&&k.touched)?34:-1),t(3),g(d(38,37,"passwordReset.new.requirements_title")),t(3),_("valid",((P=e.passwordForm.get("password"))==null||P.value==null?null:P.value.length)>=8),t(),O(((C=e.passwordForm.get("password"))==null||C.value==null?null:C.value.length)>=8?"fas fa-check-circle":"fas fa-circle"),t(),w(" ",d(43,39,"passwordReset.new.requirement_length")," "),t(2),u("disabled",e.passwordForm.invalid||e.isLoading()),t(),b(e.isLoading()?45:46),t(2),w(" ",d(48,41,"passwordReset.new.submit")," ")}},dependencies:[F,Y,D,T,q,j,G,L,B,E],styles:[".admin-login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#1e3c72,#2a5298);position:relative;padding:20px;overflow:hidden}.background-pattern[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;overflow:hidden;pointer-events:none}.pattern-circle[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:#ffffff0d}.circle-1[_ngcontent-%COMP%]{width:400px;height:400px;top:-100px;right:-100px;animation:_ngcontent-%COMP%_float 8s ease-in-out infinite}.circle-2[_ngcontent-%COMP%]{width:300px;height:300px;bottom:-50px;left:-50px;animation:_ngcontent-%COMP%_float 10s ease-in-out infinite reverse}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(30px)}}.content-wrapper[_ngcontent-%COMP%]{position:relative;z-index:10;max-width:450px;width:100%;animation:_ngcontent-%COMP%_slideDown .6s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 25px 50px #0000004d;overflow:hidden;margin-bottom:25px}.card-header[_ngcontent-%COMP%]{padding:35px 30px 25px;background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;text-align:center}.login-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:8px;color:#fff}.login-subtitle[_ngcontent-%COMP%]{font-size:13px;opacity:.85;color:#ffffffd9;margin:0}.login-form[_ngcontent-%COMP%]{padding:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:22px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{position:absolute;left:14px;font-size:16px;pointer-events:none;color:#2a5298;z-index:1}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px 12px 44px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;font-family:inherit;transition:all .3s ease;background-color:#f8f8f8}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2a5298;background-color:#fff;box-shadow:0 0 0 4px #2a52981a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc2626;background-color:#fef2f2}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.invalid-feedback[_ngcontent-%COMP%]{display:block;color:#dc2626;font-size:12px;margin-top:6px;font-weight:500}.input-wrapper[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .input-wrapper[_ngcontent-%COMP%]   input[type=text][id=password][_ngcontent-%COMP%]{padding-right:48px}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:14px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:16px;padding:6px;color:#666;transition:all .3s ease;opacity:.7;z-index:2;display:flex;align-items:center;justify-content:center;min-width:32px;min-height:32px;border-radius:4px}.toggle-password[_ngcontent-%COMP%]:hover:not(:disabled){opacity:1;color:#2a5298;background-color:#2a529814}.toggle-password[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn-login[_ngcontent-%COMP%]{width:100%;padding:12px 24px;font-size:16px;font-weight:700;background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-height:48px;text-transform:uppercase;letter-spacing:.5px}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 24px #2a529866}.btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_adminAuthSpin .6s linear infinite}@keyframes _ngcontent-%COMP%_adminAuthSpin{to{transform:rotate(360deg)}}.card-footer[_ngcontent-%COMP%]{padding:18px 30px;border-top:1px solid #e5e7eb;text-align:center;background-color:#f9fafb}.footer-text[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#666}.link-button[_ngcontent-%COMP%]{background:none;border:none;color:#2a5298;font-weight:600;cursor:pointer;padding:0 4px;transition:color .3s ease;text-decoration:underline;font-size:inherit;display:inline}.link-button[_ngcontent-%COMP%]:hover:not(:disabled){color:#1e3c72}.link-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 14px;border-radius:8px;margin-bottom:20px;font-size:13px;animation:_ngcontent-%COMP%_shake .5s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-8px)}75%{transform:translate(8px)}}.alert-danger[_ngcontent-%COMP%]{background-color:#fee2e2;border-left:4px solid #dc2626;color:#dc2626;font-weight:500}@media (max-width: 600px){.admin-login-container[_ngcontent-%COMP%]{padding:15px}.login-card[_ngcontent-%COMP%]{margin-bottom:20px}.card-header[_ngcontent-%COMP%]{padding:25px 20px 18px}.login-title[_ngcontent-%COMP%]{font-size:22px}.login-form[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 400px){.login-title[_ngcontent-%COMP%]{font-size:20px}.btn-login[_ngcontent-%COMP%]{font-size:14px;padding:11px 20px;min-height:44px}}.password-requirements[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;border-radius:6px;margin-bottom:1.5rem;text-align:left;border:1px solid #e5e7eb}.password-requirements[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;font-weight:600;color:#333;font-size:.9rem}.password-requirements[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.password-requirements[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#6b7280;margin:.3rem 0;font-size:.85rem}.password-requirements[_ngcontent-%COMP%]   li.valid[_ngcontent-%COMP%]{color:#059669}"]})};export{J as PasswordResetNewComponent};
