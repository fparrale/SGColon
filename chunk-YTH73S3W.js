import{a as Y}from"./chunk-TULKV67A.js";import{a as F,b as C,c as z,d as T,e as V,h as N,i as B,m as D,o as E,q as j}from"./chunk-7V6QZHV2.js";import{b as L}from"./chunk-SZTZXQSR.js";import{b as R,c as S,e as I}from"./chunk-CTDK6JPT.js";import{$ as _,B as w,Na as M,Q as i,R as f,T as b,V as v,Va as O,Wa as k,X as u,Z as h,da as o,ea as r,fa as p,ha as P,ja as s,ka as x,la as g,ua as y,ya as d,za as l}from"./chunk-LKTHQ3NI.js";function q(a,n){a&1&&(o(0,"div",17),s(1),d(2,"translate"),r()),a&2&&(i(),g(" ",l(2,1,"passwordReset.verify.code_error")," "))}function A(a,n){a&1&&p(0,"div",19)}function $(a,n){a&1&&p(0,"i",20)}var G=class a{constructor(n,t,e,c,m){this.fb=n;this.passwordResetService=t;this.notification=e;this.translate=c;this.router=m;this.verifyForm=this.fb.group({code:["",[C.required,C.pattern(/^\d{6}$/)]]})}verifyForm;isLoading=b(!1);timeRemaining=b(60);timerInterval;ngOnInit(){this.startTimer()}ngOnDestroy(){this.stopTimer()}startTimer(){this.timerInterval=window.setInterval(()=>{let n=this.timeRemaining()-1;if(this.timeRemaining.set(n),n<=0){this.stopTimer();let t=this.translate.instant("passwordReset.verify.expired");this.notification.error(t,5e3),this.router.navigate(["/admin/password-reset/request"])}},1e3)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval)}formatTime(n){let t=Math.floor(n/60),e=n%60;return`${t}:${e.toString().padStart(2,"0")}`}onSubmit(){if(this.verifyForm.invalid)return;this.isLoading.set(!0);let n=this.verifyForm.value.code;this.passwordResetService.verifyCode(n).subscribe({next:t=>{if(this.isLoading.set(!1),t.ok&&t.valid){let e=this.translate.instant("passwordReset.verify.success");this.notification.success(e,3e3),this.stopTimer(),this.router.navigate(["/admin/password-reset/new"],{queryParams:{code:n}})}else{let e=this.translate.instant("passwordReset.verify.invalid");this.notification.error(e,4e3)}},error:t=>{this.isLoading.set(!1),console.error("Verify code error:",t);let e="";t.error&&(typeof t.error=="string"?e=t.error:t.error.error?e=t.error.error:t.error.message&&(e=t.error.message)),e||(e=this.translate.instant("passwordReset.verify.error")),this.notification.error(e,4e3)}})}static \u0275fac=function(t){return new(t||a)(f(E),f(Y),f(L),f(R),f(O))};static \u0275cmp=w({type:a,selectors:[["app-password-reset-verify"]],standalone:!0,features:[y],decls:38,vars:27,consts:[[1,"admin-login-container"],[1,"background-pattern"],[1,"pattern-circle","circle-1"],[1,"pattern-circle","circle-2"],[1,"content-wrapper"],[1,"login-card"],[1,"card-header"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form"],[1,"timer-container"],[1,"timer"],[1,"fas","fa-clock"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","code",1,"form-label"],["type","text","id","code","formControlName","code","maxlength","6",1,"code-input",3,"placeholder"],[1,"invalid-feedback",2,"text-align","center","margin-top","0.5rem"],["type","submit",1,"btn-login",3,"disabled"],[1,"spinner"],[1,"fas","fa-check"],[1,"card-footer"],[1,"footer-text"],["type","button","routerLink","/admin/password-reset/request",1,"link-button"],[1,"fas","fa-arrow-left"]],template:function(t,e){if(t&1&&(o(0,"div",0)(1,"div",1),p(2,"div",2)(3,"div",3),r(),o(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),s(8),d(9,"translate"),r(),o(10,"p",8),s(11),d(12,"translate"),r()(),o(13,"div",9)(14,"div",10)(15,"div",11),p(16,"i",12),s(17),r()(),o(18,"form",13),P("ngSubmit",function(){return e.onSubmit()}),o(19,"div",14)(20,"label",15),s(21),d(22,"translate"),r(),o(23,"div"),p(24,"input",16),d(25,"translate"),r(),v(26,q,3,3,"div",17),r(),o(27,"button",18),v(28,A,1,0,"div",19)(29,$,1,0,"i",20),s(30),d(31,"translate"),r()(),o(32,"div",21)(33,"p",22)(34,"button",23),p(35,"i",24),s(36),d(37,"translate"),r()()()()()()()),t&2){let c,m;i(8),x(l(9,15,"passwordReset.verify.title")),i(3),x(l(12,17,"passwordReset.verify.subtitle")),i(4),h("expiring",e.timeRemaining()<10),i(2),g(" ",e.formatTime(e.timeRemaining())," "),i(),u("formGroup",e.verifyForm),i(3),x(l(22,19,"passwordReset.verify.code_label")),i(3),h("error",((c=e.verifyForm.get("code"))==null?null:c.invalid)&&((c=e.verifyForm.get("code"))==null?null:c.touched)),u("placeholder",l(25,21,"passwordReset.verify.code_placeholder")),i(2),_((m=e.verifyForm.get("code"))!=null&&m.invalid&&((m=e.verifyForm.get("code"))!=null&&m.touched)?26:-1),i(),u("disabled",e.verifyForm.invalid||e.isLoading()),i(),_(e.isLoading()?28:29),i(2),g(" ",l(31,23,"passwordReset.verify.submit")," "),i(6),g(" ",l(37,25,"passwordReset.verify.back")," ")}},dependencies:[M,j,V,F,z,T,D,N,B,I,S,k],styles:[".admin-login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#1e3c72,#2a5298);position:relative;padding:20px;overflow:hidden}.background-pattern[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;overflow:hidden;pointer-events:none}.pattern-circle[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:#ffffff0d}.circle-1[_ngcontent-%COMP%]{width:400px;height:400px;top:-100px;right:-100px;animation:_ngcontent-%COMP%_float 8s ease-in-out infinite}.circle-2[_ngcontent-%COMP%]{width:300px;height:300px;bottom:-50px;left:-50px;animation:_ngcontent-%COMP%_float 10s ease-in-out infinite reverse}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(30px)}}.content-wrapper[_ngcontent-%COMP%]{position:relative;z-index:10;max-width:450px;width:100%;animation:_ngcontent-%COMP%_slideDown .6s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 25px 50px #0000004d;overflow:hidden;margin-bottom:25px}.card-header[_ngcontent-%COMP%]{padding:35px 30px 25px;background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;text-align:center}.login-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:8px;color:#fff}.login-subtitle[_ngcontent-%COMP%]{font-size:13px;opacity:.85;color:#ffffffd9;margin:0}.login-form[_ngcontent-%COMP%]{padding:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:22px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{position:absolute;left:14px;font-size:16px;pointer-events:none;color:#2a5298;z-index:1}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px 12px 44px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;font-family:inherit;transition:all .3s ease;background-color:#f8f8f8}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2a5298;background-color:#fff;box-shadow:0 0 0 4px #2a52981a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc2626;background-color:#fef2f2}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.invalid-feedback[_ngcontent-%COMP%]{display:block;color:#dc2626;font-size:12px;margin-top:6px;font-weight:500}.input-wrapper[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .input-wrapper[_ngcontent-%COMP%]   input[type=text][id=password][_ngcontent-%COMP%]{padding-right:48px}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:14px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:16px;padding:6px;color:#666;transition:all .3s ease;opacity:.7;z-index:2;display:flex;align-items:center;justify-content:center;min-width:32px;min-height:32px;border-radius:4px}.toggle-password[_ngcontent-%COMP%]:hover:not(:disabled){opacity:1;color:#2a5298;background-color:#2a529814}.toggle-password[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn-login[_ngcontent-%COMP%]{width:100%;padding:12px 24px;font-size:16px;font-weight:700;background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-height:48px;text-transform:uppercase;letter-spacing:.5px}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 24px #2a529866}.btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_adminAuthSpin .6s linear infinite}@keyframes _ngcontent-%COMP%_adminAuthSpin{to{transform:rotate(360deg)}}.card-footer[_ngcontent-%COMP%]{padding:18px 30px;border-top:1px solid #e5e7eb;text-align:center;background-color:#f9fafb}.footer-text[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#666}.link-button[_ngcontent-%COMP%]{background:none;border:none;color:#2a5298;font-weight:600;cursor:pointer;padding:0 4px;transition:color .3s ease;text-decoration:underline;font-size:inherit;display:inline}.link-button[_ngcontent-%COMP%]:hover:not(:disabled){color:#1e3c72}.link-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 14px;border-radius:8px;margin-bottom:20px;font-size:13px;animation:_ngcontent-%COMP%_shake .5s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-8px)}75%{transform:translate(8px)}}.alert-danger[_ngcontent-%COMP%]{background-color:#fee2e2;border-left:4px solid #dc2626;color:#dc2626;font-weight:500}@media (max-width: 600px){.admin-login-container[_ngcontent-%COMP%]{padding:15px}.login-card[_ngcontent-%COMP%]{margin-bottom:20px}.card-header[_ngcontent-%COMP%]{padding:25px 20px 18px}.login-title[_ngcontent-%COMP%]{font-size:22px}.login-form[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 400px){.login-title[_ngcontent-%COMP%]{font-size:20px}.btn-login[_ngcontent-%COMP%]{font-size:14px;padding:11px 20px;min-height:44px}}.content-wrapper[_ngcontent-%COMP%]{max-width:500px}.timer-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.timer[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.8rem 1.5rem;background:#f0fdf4;color:#166534;border-radius:25px;font-weight:600;font-size:1.1rem;border:1px solid #bbf7d0}.timer.expiring[_ngcontent-%COMP%]{background:#fef2f2;color:#991b1b;border-color:#fecaca;animation:_ngcontent-%COMP%_pulse 1s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.code-input[_ngcontent-%COMP%]{width:100%;padding:1rem;border:2px solid #e0e0e0;border-radius:6px;font-size:1.5rem;text-align:center;letter-spacing:.5rem;font-weight:600;transition:border-color .2s;background-color:#f8f8f8}.code-input[_ngcontent-%COMP%]:focus{border-color:#2a5298;background-color:#fff;box-shadow:0 0 0 4px #2a52981a;outline:none}.code-input.error[_ngcontent-%COMP%]{border-color:#dc2626;background-color:#fef2f2}"]})};export{G as PasswordResetVerifyComponent};
