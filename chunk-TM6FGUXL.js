import{a as Z}from"./chunk-SWRSJAP4.js";import{a as U}from"./chunk-ABRIHUGC.js";import{a as Y}from"./chunk-CURU7WTK.js";import"./chunk-BYXBJQAS.js";import{a as z,b as v,c as B,d as N,e as R,h as j,i as D,m as V,o as q,q as G}from"./chunk-7V6QZHV2.js";import{a as b,b as H}from"./chunk-SZTZXQSR.js";import{b as A,c as T}from"./chunk-CTDK6JPT.js";import{$ as S,B as y,Ka as E,Na as L,Q as t,R as _,T as w,V as x,Va as I,Wa as F,X as c,Z as O,da as n,ea as o,fa as f,ha as M,ia as P,ja as s,ka as g,la as h,ua as k,ya as p,za as d}from"./chunk-LKTHQ3NI.js";function J(e,l){e&1&&(n(0,"small"),s(1),p(2,"translate"),o()),e&2&&(t(),g(d(2,1,"admin.login.emailRequired")))}function K(e,l){e&1&&(n(0,"small"),s(1),p(2,"translate"),o()),e&2&&(t(),g(d(2,1,"admin.login.invalidEmail")))}function Q(e,l){e&1&&(n(0,"small"),s(1),p(2,"translate"),o()),e&2&&(t(),g(d(2,1,"admin.login.emailMaxLength")))}function W(e,l){if(e&1&&(n(0,"div",39),x(1,J,3,3,"small",40)(2,K,3,3,"small",40)(3,Q,3,3,"small",40),o()),e&2){let m,i,a,r=P();t(),c("ngIf",(m=r.loginForm.get("email"))==null?null:m.hasError("required")),t(),c("ngIf",(i=r.loginForm.get("email"))==null?null:i.hasError("invalidEmail")),t(),c("ngIf",(a=r.loginForm.get("email"))==null?null:a.hasError("maxlength"))}}function X(e,l){e&1&&f(0,"i",23)}function ee(e,l){e&1&&f(0,"i",24)}function te(e,l){e&1&&(n(0,"small"),s(1),p(2,"translate"),o()),e&2&&(t(),g(d(2,1,"admin.login.passwordRequired")))}function ne(e,l){e&1&&(n(0,"small"),s(1),p(2,"translate"),o()),e&2&&(t(),g(d(2,1,"admin.login.passwordMinLength")))}function ie(e,l){e&1&&(n(0,"small"),s(1),p(2,"translate"),o()),e&2&&(t(),g(d(2,1,"admin.login.passwordMaxLength")))}function oe(e,l){if(e&1&&(n(0,"div",39),x(1,te,3,3,"small",40)(2,ne,3,3,"small",40)(3,ie,3,3,"small",40),o()),e&2){let m,i,a,r=P();t(),c("ngIf",(m=r.loginForm.get("password"))==null?null:m.hasError("required")),t(),c("ngIf",(i=r.loginForm.get("password"))==null?null:i.hasError("minlength")),t(),c("ngIf",(a=r.loginForm.get("password"))==null?null:a.hasError("maxlength"))}}function ae(e,l){if(e&1&&(n(0,"div",41),f(1,"i",42),n(2,"span"),s(3),o()()),e&2){let m=P();t(3),g(m.errorMessage())}}function re(e,l){e&1&&(n(0,"span",43),s(1),p(2,"translate"),o()),e&2&&(t(),h(" ",d(2,1,"admin.login.loginButton")," "))}function le(e,l){e&1&&(n(0,"span",43),f(1,"span",44),s(2),p(3,"translate"),o()),e&2&&(t(2),h(" ",d(3,1,"admin.login.verifying")," "))}var $=class e{constructor(l,m,i,a,r,u){this.fb=l;this.authService=m;this.notification=i;this.router=a;this.translate=r;this.languageService=u;this.loginForm=this.fb.group({email:["",[v.required,v.maxLength(100),this.emailValidator]],password:["",[v.required,v.minLength(6),v.maxLength(50)]]})}loginForm;isLoading=w(!1);errorMessage=w("");showPassword=w(!1);emailValidator(l){let m=l.value;return m?/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(m)?null:{invalidEmail:!0}:null}onSubmit(){if(this.errorMessage.set(""),this.loginForm.markAllAsTouched(),this.loginForm.invalid){this.loginForm.get("email")?.hasError("required")?this.errorMessage.set("Por favor ingresa tu correo electr\xF3nico"):this.loginForm.get("email")?.hasError("invalidEmail")?this.errorMessage.set("Por favor ingresa un correo electr\xF3nico v\xE1lido"):this.loginForm.get("email")?.hasError("maxlength")?this.errorMessage.set("El correo electr\xF3nico no puede exceder los 100 caracteres"):this.loginForm.get("password")?.hasError("required")?this.errorMessage.set("Por favor ingresa tu contrase\xF1a"):this.loginForm.get("password")?.hasError("minlength")?this.errorMessage.set("La contrase\xF1a debe tener al menos 6 caracteres"):this.loginForm.get("password")?.hasError("maxlength")&&this.errorMessage.set("La contrase\xF1a no puede exceder los 50 caracteres");return}this.isLoading.set(!0),this.loginForm.disable();let l=this.loginForm.value,m=l.email.trim(),i=l.password;this.authService.login(m,i).subscribe({next:a=>{if(a.ok&&a.token){this.authService.setToken(a.token),this.notification.success(this.translate.instant("errors.login_success"),b.SHORT);let r=this.authService.getCurrentUser();r&&this.languageService.getUserPreference("admin",r.id).subscribe({next:u=>{this.languageService.setLanguage(u.language)},error:u=>console.warn("Could not load language preference:",u)}),setTimeout(()=>{this.router.navigate(["/admin/dashboard"]).then(u=>{u||(this.notification.error(this.translate.instant("errors.dashboard_access_error"),b.DEFAULT),this.loginForm.enable()),this.isLoading.set(!1)})},100)}else{let r=a.error||this.translate.instant("errors.invalid_credentials");this.notification.error(r,b.DEFAULT),this.isLoading.set(!1),this.loginForm.enable()}},error:a=>{let r=this.translate.instant("errors.server_connection_error");a.status===401?r=this.translate.instant("errors.check_credentials"):a.status===0?r=this.translate.instant("errors.check_internet"):a.error?.error&&(r=a.error.error),this.notification.error(r,b.LONG),this.isLoading.set(!1),this.loginForm.enable()}})}togglePasswordVisibility(){this.showPassword.set(!this.showPassword())}goToPlay(){this.router.navigate(["/play"])}static \u0275fac=function(m){return new(m||e)(_(q),_(Y),_(H),_(I),_(A),_(U))};static \u0275cmp=y({type:e,selectors:[["app-admin-login"]],standalone:!0,features:[k],decls:69,vars:48,consts:[[1,"admin-login-container"],[1,"background-pattern"],[1,"pattern-circle","circle-1"],[1,"pattern-circle","circle-2"],[1,"content-wrapper"],[1,"login-card"],[1,"language-selector-wrapper"],[1,"card-header"],[1,"d-flex","align-items-center","justify-content-center","gap-3","mb-3"],[1,"fas","fa-user-shield","fs-2x","text-primary"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email",1,"form-label"],[1,"input-wrapper"],[1,"fas","fa-envelope","text-primary"],["type","email","id","email","formControlName","email","placeholder","admin@sg-ia.com","maxlength","100","autocomplete","email",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label"],[1,"fas","fa-lock","text-primary"],["id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","maxlength","50","autocomplete","current-password",1,"form-control",3,"type"],["type","button",1,"toggle-password","d-flex","align-items-center",3,"click","disabled","title"],[1,"fas","fa-eye","text-primary"],[1,"fas","fa-eye-slash","text-muted"],["class","alert alert-danger d-flex align-items-start gap-2",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-login",3,"disabled"],["class","btn-text",4,"ngIf"],[1,"forgot-password"],["routerLink","/admin/password-reset/request",1,"forgot-link"],[1,"card-footer"],[1,"footer-text"],["type","button",1,"link-button",3,"click","disabled"],[1,"info-box"],[1,"info-item"],[1,"fas","fa-chart-line","fs-2x","text-info"],[1,"info-text"],[1,"fas","fa-gear","fs-2x","text-warning"],[1,"fas","fa-arrow-up","fs-2x","text-success"],[1,"invalid-feedback"],[4,"ngIf"],[1,"alert","alert-danger","d-flex","align-items-start","gap-2"],[1,"fas","fa-circle-info","text-danger","mt-1"],[1,"btn-text"],[1,"spinner"]],template:function(m,i){if(m&1&&(n(0,"div",0)(1,"div",1),f(2,"div",2)(3,"div",3),o(),n(4,"div",4)(5,"div",5)(6,"div",6),f(7,"app-language-selector"),o(),n(8,"div",7)(9,"div",8),f(10,"i",9),o(),n(11,"h1",10),s(12),p(13,"translate"),o(),n(14,"p",11),s(15),p(16,"translate"),o()(),n(17,"form",12),M("ngSubmit",function(){return i.onSubmit()}),n(18,"div",13)(19,"label",14),s(20),p(21,"translate"),o(),n(22,"div",15),f(23,"i",16)(24,"input",17),o(),x(25,W,4,3,"div",18),o(),n(26,"div",13)(27,"label",19),s(28),p(29,"translate"),o(),n(30,"div",15),f(31,"i",20)(32,"input",21),n(33,"button",22),p(34,"translate"),M("click",function(){return i.togglePasswordVisibility()}),x(35,X,1,0,"i",23)(36,ee,1,0,"i",24),o()(),x(37,oe,4,3,"div",18),o(),x(38,ae,4,1,"div",25),n(39,"button",26),x(40,re,3,3,"span",27)(41,le,4,3,"span",27),o(),n(42,"div",28)(43,"a",29),s(44),p(45,"translate"),o()()(),n(46,"div",30)(47,"p",31),s(48),p(49,"translate"),n(50,"button",32),M("click",function(){return i.goToPlay()}),s(51),p(52,"translate"),o()()()(),n(53,"div",33)(54,"div",34),f(55,"i",35),n(56,"span",36),s(57),p(58,"translate"),o()(),n(59,"div",34),f(60,"i",37),n(61,"span",36),s(62),p(63,"translate"),o()(),n(64,"div",34),f(65,"i",38),n(66,"span",36),s(67),p(68,"translate"),o()()()()()),m&2){let a,r,u,C;t(12),g(d(13,26,"admin.login.controlPanel")),t(3),g(d(16,28,"admin.login.adminAccess")),t(2),c("formGroup",i.loginForm),t(3),g(d(21,30,"admin.login.email")),t(4),O("is-invalid",((a=i.loginForm.get("email"))==null?null:a.invalid)&&((a=i.loginForm.get("email"))==null?null:a.touched)),t(),c("ngIf",((r=i.loginForm.get("email"))==null?null:r.invalid)&&((r=i.loginForm.get("email"))==null?null:r.touched)),t(3),g(d(29,32,"admin.login.password")),t(4),O("is-invalid",((u=i.loginForm.get("password"))==null?null:u.invalid)&&((u=i.loginForm.get("password"))==null?null:u.touched)),c("type",i.showPassword()?"text":"password"),t(),c("disabled",i.isLoading())("title",d(34,34,"admin.login.togglePassword")),t(2),S(i.showPassword()?35:36),t(2),c("ngIf",((C=i.loginForm.get("password"))==null?null:C.invalid)&&((C=i.loginForm.get("password"))==null?null:C.touched)),t(),c("ngIf",i.errorMessage()),t(),c("disabled",i.isLoading()),t(),c("ngIf",!i.isLoading()),t(),c("ngIf",i.isLoading()),t(3),h(" ",d(45,36,"admin.login.forgot_password")," "),t(4),h(" ",d(49,38,"admin.login.notAdmin")," "),t(2),c("disabled",i.isLoading()),t(),h(" ",d(52,40,"admin.login.backToGame")," "),t(6),g(d(58,42,"admin.login.questionManagement")),t(5),g(d(63,44,"admin.login.aiConfiguration")),t(5),g(d(68,46,"admin.login.dataAnalysis"))}},dependencies:[L,E,G,R,z,B,N,V,j,D,T,Z,F],styles:[".admin-login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#1e3c72,#2a5298);position:relative;padding:20px;overflow:hidden}.background-pattern[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;overflow:hidden;pointer-events:none}.pattern-circle[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:#ffffff0d}.circle-1[_ngcontent-%COMP%]{width:400px;height:400px;top:-100px;right:-100px;animation:_ngcontent-%COMP%_float 8s ease-in-out infinite}.circle-2[_ngcontent-%COMP%]{width:300px;height:300px;bottom:-50px;left:-50px;animation:_ngcontent-%COMP%_float 10s ease-in-out infinite reverse}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(30px)}}.content-wrapper[_ngcontent-%COMP%]{position:relative;z-index:10;max-width:450px;width:100%;animation:_ngcontent-%COMP%_slideDown .6s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 25px 50px #0000004d;overflow:hidden;margin-bottom:25px}.card-header[_ngcontent-%COMP%]{padding:35px 30px 25px;background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;text-align:center}.login-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:8px;color:#fff}.login-subtitle[_ngcontent-%COMP%]{font-size:13px;opacity:.85;color:#ffffffd9;margin:0}.login-form[_ngcontent-%COMP%]{padding:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:22px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{position:absolute;left:14px;font-size:16px;pointer-events:none;color:#2a5298;z-index:1}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px 12px 44px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;font-family:inherit;transition:all .3s ease;background-color:#f8f8f8}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2a5298;background-color:#fff;box-shadow:0 0 0 4px #2a52981a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc2626;background-color:#fef2f2}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.invalid-feedback[_ngcontent-%COMP%]{display:block;color:#dc2626;font-size:12px;margin-top:6px;font-weight:500}.input-wrapper[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .input-wrapper[_ngcontent-%COMP%]   input[type=text][id=password][_ngcontent-%COMP%]{padding-right:48px}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:14px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:16px;padding:6px;color:#666;transition:all .3s ease;opacity:.7;z-index:2;display:flex;align-items:center;justify-content:center;min-width:32px;min-height:32px;border-radius:4px}.toggle-password[_ngcontent-%COMP%]:hover:not(:disabled){opacity:1;color:#2a5298;background-color:#2a529814}.toggle-password[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn-login[_ngcontent-%COMP%]{width:100%;padding:12px 24px;font-size:16px;font-weight:700;background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-height:48px;text-transform:uppercase;letter-spacing:.5px}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 24px #2a529866}.btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_adminAuthSpin .6s linear infinite}@keyframes _ngcontent-%COMP%_adminAuthSpin{to{transform:rotate(360deg)}}.card-footer[_ngcontent-%COMP%]{padding:18px 30px;border-top:1px solid #e5e7eb;text-align:center;background-color:#f9fafb}.footer-text[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#666}.link-button[_ngcontent-%COMP%]{background:none;border:none;color:#2a5298;font-weight:600;cursor:pointer;padding:0 4px;transition:color .3s ease;text-decoration:underline;font-size:inherit;display:inline}.link-button[_ngcontent-%COMP%]:hover:not(:disabled){color:#1e3c72}.link-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px 14px;border-radius:8px;margin-bottom:20px;font-size:13px;animation:_ngcontent-%COMP%_shake .5s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-8px)}75%{transform:translate(8px)}}.alert-danger[_ngcontent-%COMP%]{background-color:#fee2e2;border-left:4px solid #dc2626;color:#dc2626;font-weight:500}@media (max-width: 600px){.admin-login-container[_ngcontent-%COMP%]{padding:15px}.login-card[_ngcontent-%COMP%]{margin-bottom:20px}.card-header[_ngcontent-%COMP%]{padding:25px 20px 18px}.login-title[_ngcontent-%COMP%]{font-size:22px}.login-form[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 400px){.login-title[_ngcontent-%COMP%]{font-size:20px}.btn-login[_ngcontent-%COMP%]{font-size:14px;padding:11px 20px;min-height:44px}}.btn-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.info-box[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;background:#ffffff0d;border-radius:12px;padding:20px;backdrop-filter:blur(10px)}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;color:#fff;text-align:center}.info-icon[_ngcontent-%COMP%]{font-size:24px}.info-text[_ngcontent-%COMP%]{font-size:11px;opacity:.85;line-height:1.3}.language-selector-wrapper[_ngcontent-%COMP%]{position:absolute;top:1.5rem;right:1.5rem;z-index:10}.forgot-password[_ngcontent-%COMP%]{text-align:center;margin-top:15px}.forgot-link[_ngcontent-%COMP%]{color:#2a5298;font-size:14px;text-decoration:none;font-weight:500;transition:color .3s ease}.forgot-link[_ngcontent-%COMP%]:hover{color:#1e3c72;text-decoration:underline}@media (max-width: 600px){.info-box[_ngcontent-%COMP%]{gap:10px;padding:15px}.info-icon[_ngcontent-%COMP%]{font-size:20px}.info-text[_ngcontent-%COMP%]{font-size:10px}}@media (max-width: 400px){.info-box[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{$ as AdminLoginComponent};
