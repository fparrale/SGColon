import{a as et}from"./chunk-ABRIHUGC.js";import"./chunk-BYXBJQAS.js";import{a as p,b as C}from"./chunk-SZTZXQSR.js";import{a as W,c as X,d as tt}from"./chunk-CTDK6JPT.js";import{$ as f,A as n,B as g,Da as $,G as k,H as L,Na as z,Oa as y,Pa as l,Q as c,Qa as V,R as M,Ra as G,Sa as Y,Ua as Z,V as T,Va as J,Xa as Q,Ya as q,Za as K,_ as S,_a as E,a as O,da as d,ea as m,fa as a,ga as A,h as P,ha as H,ia as D,ja as F,ka as j,n as N,ua as u,w as s,y as R,ya as U,za as B}from"./chunk-LKTHQ3NI.js";var I=new R("TRANSLATE_HTTP_LOADER_CONFIG"),ct=(()=>{class t{http;config;constructor(){this.config=O({prefix:"/assets/i18n/",suffix:".json",enforceLoading:!1,useHttpBackend:!1},n(I)),this.http=this.config.useHttpBackend?new l(n(y)):n(l)}getTranslation(e){let r=this.config.enforceLoading?`?enforceLoading=${Date.now()}`:"";return this.http.get(`${this.config.prefix}${e}${this.config.suffix}${r}`)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=s({token:t,factory:t.\u0275fac})}return t})();function ot(t={}){let o=t.useHttpBackend??!1;return[{provide:I,useValue:t},{provide:W,useClass:ct,deps:[o?y:l,I]}]}var nt=[{path:"admin/login",loadComponent:()=>import("./chunk-TM6FGUXL.js").then(t=>t.AdminLoginComponent),data:{title:"Acceso de Administrador"}},{path:"admin/password-reset/request",loadComponent:()=>import("./chunk-ZLN5VT35.js").then(t=>t.PasswordResetRequestComponent),data:{title:"Recuperar Contrase\xF1a"}},{path:"admin/password-reset/verify",loadComponent:()=>import("./chunk-YTH73S3W.js").then(t=>t.PasswordResetVerifyComponent),data:{title:"Verificar C\xF3digo"}},{path:"admin/password-reset/new",loadComponent:()=>import("./chunk-JNTMCTOJ.js").then(t=>t.PasswordResetNewComponent),data:{title:"Nueva Contrase\xF1a"}},{path:"admin",loadChildren:()=>import("./chunk-B5BVZKV5.js").then(t=>t.ADMIN_ROUTES)},{path:"play",loadComponent:()=>import("./chunk-KTRS2MZS.js").then(t=>t.GameStartComponent),data:{title:"Ingreso de Jugador"}},{path:"game/board",loadComponent:()=>import("./chunk-LCWZEWMQ.js").then(t=>t.GameBoardComponent),data:{title:"Tablero del Juego"}},{path:"leaderboard",loadComponent:()=>import("./chunk-BXFZ3EH5.js").then(t=>t.LeaderboardComponent),data:{title:"Clasificaci\xF3n"}},{path:"profile",loadComponent:()=>import("./chunk-VFRKW6UP.js").then(t=>t.PlayerProfileComponent),data:{title:"Mi Perfil"}},{path:"",redirectTo:"/play",pathMatch:"full"},{path:"**",redirectTo:"/play"}];var it=(t,o)=>{let e=localStorage.getItem("token"),i={"Accept-Language":localStorage.getItem("sg_ia_language")||"es"};return e&&(i.Authorization=`Bearer ${e}`),t=t.clone({setHeaders:i}),o(t)};var x=class t{http=n(l);apiUrl=E.apiBaseUrl;error(o,e){let r={message:o,status:e.status,status_text:e.statusText||null,url:e.url||"unknown"},i=`${this.apiUrl}${E.apiEndpoints.logs.error}`;this.http.post(i,r).subscribe({error:()=>{}})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var _=class t{logger=n(x);notification=n(C);handle(o){switch(this.logger.error(`HTTP Error ${o.status}`,o),o.status){case 401:this.notification.error("Sesi\xF3n expirada. Por favor inicia sesi\xF3n nuevamente.",p.LONG);break;case 403:this.notification.error("Acceso denegado.",p.DEFAULT);break;case 404:this.notification.error("Recurso no encontrado.",p.DEFAULT);break;case 500:this.notification.error("Error del servidor. Intenta m\xE1s tarde.",p.LONG);break;case 400:this.notification.error("Solicitud inv\xE1lida.",p.DEFAULT);break;default:this.notification.error("Error desconocido. Intenta de nuevo.",p.DEFAULT)}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var rt=(t,o)=>{let e=n(J),r=n(_);return o(t).pipe(N(i=>{let w=t.url.includes("/auth/login");return i.status===401&&!w?(localStorage.removeItem("token"),e.navigate(["/admin/login"])):w||r.handle(i),P(()=>i)}))};var at={providers:[$({eventCoalescing:!0}),q(nt,K(Q)),V(G([it,rt])),tt({fallbackLang:"es",loader:ot({prefix:"./assets/i18n/",suffix:".json"})})]};function ft(t,o){t&1&&a(0,"i",5)}function lt(t,o){t&1&&a(0,"i",6)}function dt(t,o){t&1&&a(0,"i",7)}function mt(t,o){t&1&&a(0,"i",8)}function gt(t,o){if(t&1){let e=A();d(0,"div",2)(1,"div",3)(2,"div",4),T(3,ft,1,0,"i",5)(4,lt,1,0,"i",6)(5,dt,1,0,"i",7)(6,mt,1,0,"i",8),m(),d(7,"span",9),F(8),U(9,"translate"),m(),d(10,"button",10),H("click",function(){k(e);let i=D();return L(i.notificationService.clear())}),a(11,"i",11),m()()()}if(t&2){let e=o;S("notification-bar notification-"+e.type),c(3),f(e.type==="success"?3:-1),c(),f(e.type==="error"?4:-1),c(),f(e.type==="warning"?5:-1),c(),f(e.type==="info"?6:-1),c(2),j(B(9,7,e.message))}}var v=class t{notificationService=n(C);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-notification"]],standalone:!0,features:[u],decls:2,vars:1,consts:[[1,"notification-container"],["role","alert",3,"class"],["role","alert"],[1,"notification-content"],[1,"notification-icon"],[1,"fas","fa-check-circle"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-exclamation-triangle"],[1,"fas","fa-info-circle"],[1,"notification-message"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"fas","fa-times"]],template:function(e,r){if(e&1&&(d(0,"div",0),T(1,gt,12,9,"div",1),m()),e&2){let i;c(),f((i=r.notificationService.currentNotification())?1:-1,i)}},dependencies:[z,X],styles:[".notification-container[_ngcontent-%COMP%]{position:fixed;top:70px;left:50%;transform:translate(-50%);z-index:9999;width:100%;max-width:600px;padding:0 20px}.notification-bar[_ngcontent-%COMP%]{border-radius:12px;padding:16px 20px;display:flex;align-items:center;box-shadow:0 8px 24px #00000026;animation:_ngcontent-%COMP%_slideDownBounce .5s cubic-bezier(.68,-.55,.265,1.55);backdrop-filter:blur(10px)}@keyframes _ngcontent-%COMP%_slideDownBounce{0%{opacity:0;transform:translateY(-30px) scale(.9)}70%{transform:translateY(5px) scale(1.02)}to{opacity:1;transform:translateY(0) scale(1)}}.notification-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;gap:16px}.notification-icon[_ngcontent-%COMP%]{font-size:24px;display:flex;align-items:center;flex-shrink:0}.notification-message[_ngcontent-%COMP%]{flex:1;font-size:15px;font-weight:500;line-height:1.4}.notification-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:2px solid rgba(255,255,255,.3)}.notification-error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border:2px solid rgba(255,255,255,.3)}.notification-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:2px solid rgba(255,255,255,.3)}.notification-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:2px solid rgba(255,255,255,.3)}.btn-close[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:50%;width:32px;height:32px;cursor:pointer;padding:0;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s ease;flex-shrink:0}.btn-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.btn-close[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]{top:60px;max-width:calc(100% - 20px);padding:0 10px}.notification-bar[_ngcontent-%COMP%]{padding:14px 16px}.notification-icon[_ngcontent-%COMP%]{font-size:20px}.notification-message[_ngcontent-%COMP%]{font-size:14px}.btn-close[_ngcontent-%COMP%]{width:28px;height:28px}}"]})};var b=class t{constructor(o){this.languageService=o}static \u0275fac=function(e){return new(e||t)(M(et))};static \u0275cmp=g({type:t,selectors:[["app-root"]],standalone:!0,features:[u],decls:2,vars:0,template:function(e,r){e&1&&a(0,"router-outlet")(1,"app-notification")},dependencies:[Z,v]})};Y(b,at).catch(t=>console.error(t));
